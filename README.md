# DSU多站自动签到 (基于Ne-21脚本重构)

代码由 [DeepSeek](https://chat.deepseek.com/) 以及 [通义](https://www.tongyi.com/) 编写。

## 写在前面的话

本人能力有限，做出的测试并不多，脚本使用过程中可能遇到各种各样的 BUG。

脚本已经在 [GitHub](https://github.com/little3tar/discuz-dsu-checkin) 开源，**请一定要来**修复某个 BUG 或完善添加更多支持的网站，拜托拜托ᓚᘏᗢ

## 背景

在使用 [Ne-21](https://scriptcat.org/zh-CN/users/227) 发布的 [DSU每日自动签到(上云版)](https://scriptcat.org/zh-CN/script-show-page/332) 时，我发现有几个网站使用的是同样的签到方式，于是想到一个脚本能否能签到多个网站。

说干就干，感谢 AI，此脚本基于**DSU每日自动签到(上云版)**，在 AI 的帮助下拓展了脚本的功能，现在支持同样使用 Discuz! + DSU签到插件（dsu_paulsign） 进行签到的网站（可能？）。

脚本已经添加对 [Anime字幕论坛](https://bbs.acgrip.com/) 和 [天使动漫论坛](https://www.tsdm39.com/forum.php) 的支持，如果有其它网站的需求，可以自行在代码顶部 `const SITES` 添加。

## 注意

脚本依赖浏览器缓存的登录信息，没有提前登录过是法使用的，请确保脚本运行前添加的几个网站都已经是登录状态。

**Anime字幕论坛**最近风控好像有点严重，每次打开浏览器登录（？）都需要人机验证，所以还是脚本运行前还是得打开一次网站。

## 已知的问题

- 打开浏览器必须运行一次才能看到**手动触发菜单**

    _参考 DeepSeek 提供的方法，现在让脚本每 4 小时自动执行一次，能在一些情况下看到手动菜单，也能避免一些首次执行出错的问题，但是不知道每天多次签到会不会影响账号安全，，而且大部分时候手动菜单还是看不到的。_

## 刚想到也许会加上的功能

- 脚本内置多个支持 DSU 签到的网站，安装脚本后可以自行选择启用哪几个

## 相对于原脚本添加了以下功能

1. 支持添加多个网站

1. 手动触发菜单

    🚀 执行签到 - 手动立即执行签到

    📊 查看历史 - 查看最近10次签到记录

    🔄 立即重试失败站点 - 智能识别上次失败的站点并重试

    ⚙️ 切换自动执行 - 添加一个开关，允许用户手动触发签到，或者自动执行签到

1. 状态管理

    运行状态检测 - 防止重复执行

    错误处理优化 - 更完善的异常捕获

1. 历史记录增强

    格式化显示 - 清晰的历史记录查看

    智能重试 - 基于历史记录的失败站点重试

    记录限制 - 只保留最近20条记录

1. 用户体验优化

    操作确认 - 重要操作前确认

    状态反馈 - 实时反馈执行状态

    区分通知 - 区分正常执行和重试操作
